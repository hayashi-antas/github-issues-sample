# github-issues-sample

## AI Input Cleansing Design Principles

このプロジェクトでは、PRのdiffをAIに渡す前に「入力コンテキスト制御」を行っています。  
目的はデータ削除ではなく、**AIが読むべき情報の最適化**です。

### 設計の核となる考え方

- **リポジトリ自体は変更しない**: `.gitignore`はビルド成果物やログを除外する責務。AIレビューのために既存の`.gitignore`を汚染しない。
- **lockfileは要約して渡す**: `package-lock.json`等は削除せず、依存追加・削除のサマリのみをAIに渡す。全行をAIに読ませてもレビュー品質は向上しない。
- **Validationではなく、Cleansing/Suggestion**: エラーで止めるのではなく、AIが読みやすい形に整形し、除外内容を可視化する。

### .gitignoreとの責務の違い

- `.gitignore`: リポジトリの管理対象外を定義（Git本来の責務）
- Cleansing: AIレビューに不要なファイルを**入力から除外**する（AI入力の責務）

lockfileやテストスナップショットは「Gitで管理すべき」だが「AIレビューで全文読む必要がない」ファイルの典型例です。  
この2つの責務を分離することで、リポジトリ設定に影響を与えずAI入力を制御できます。
### 実装の制限と設計方針

現在の実装は**完全な仕様準拠ではなく、実用性重視の簡易実装**です：

- **.gitignoreマッチング**: 簡易的な正規表現マッチのみ対応。複雑な否定パターン（`!`）や一部の高度な記法は非対応。
- **lockfile要約**: npm/yarnの代表的な形式のみ対応。すべてのパッケージマネージャの全記法を網羅していない。
- **安全側の設計**: 誤検知でAI入力から除外するリスクを避けるため、**判定が曖昧な場合はAIに渡す**方向に倒している。

この割り切りにより、軽量で保守しやすい実装を保ちつつ、AIレビューに必要な情報を確実に届けることを優先しています。